webpackJsonp([15],{587:function(e,t,n){n(787);var r=n(307)(n(675),n(761),"data-v-f1620a1e",null);r.options.__file="D:\\jiuye-pro\\jydata-git\\mcp-new\\mcp-ui\\src\\pages\\project\\JobExecution.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] JobExecution.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},597:function(e,t,n){"use strict";var r=n(310),o=n.n(r),i=n(599),a=n.n(i),u=n(600),s=n.n(u),c=function(){function e(){a()(this,e)}return s()(e,null,[{key:"setPromise",value:function(e,t,n){return new o.a(function(r,o){switch(e.toUpperCase()){case"GET":axios.get(t,{params:n}).then(function(e){e?r(e.data):o()});break;case"POST":case"PUT":axios({method:e,url:t,data:n}).then(function(e){e?r(e.data):o()});break;case"DELETE":axios.delete(t,{data:n}).then(function(e){e?r(e.data):o()})}})}}]),e}();t.a=c},598:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r="SUCCESS",o="ERROR"},599:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},600:function(e,t,n){"use strict";t.__esModule=!0;var r=n(309),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},601:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"j",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"f",function(){return a}),n.d(t,"k",function(){return u}),n.d(t,"l",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"i",function(){return f}),n.d(t,"h",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"a",function(){return p});var r="Operation is successful！",o="Add successfully！",i="Updated successfully！",a="Deleted successfully！",u="Connection test successfully!",s="Connection test successfully!",c="Saved successfully!",l="Saved failed!",f="Synchronized successfully!",d="Transform successfully!",m="Reset password successfully！",p="Modify successfully！"},611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(597);n.d(t,"getJobs",function(){return o}),n.d(t,"queJobs",function(){return i}),n.d(t,"queryJobNames",function(){return a}),n.d(t,"queryDBTree",function(){return u}),n.d(t,"queryTree",function(){return s}),n.d(t,"insertJob",function(){return c}),n.d(t,"queryAgents",function(){return l}),n.d(t,"checkEnvIncrement",function(){return f}),n.d(t,"checkEnvColumn",function(){return d}),n.d(t,"checkEnvMeta",function(){return m}),n.d(t,"checkEnvDDL",function(){return p}),n.d(t,"updateJobEnable",function(){return b}),n.d(t,"queryBinlog",function(){return v}),n.d(t,"trigger",function(){return g}),n.d(t,"triggerJob",function(){return _}),n.d(t,"triggerJobById",function(){return x}),n.d(t,"pauseJob",function(){return h}),n.d(t,"pauseJobById",function(){return y}),n.d(t,"resumeJob",function(){return P}),n.d(t,"resumeJobById",function(){return j}),n.d(t,"killJobById",function(){return w}),n.d(t,"removeMetaJobById",function(){return T}),n.d(t,"killAllJobById",function(){return I}),n.d(t,"queryLogs",function(){return k}),n.d(t,"queryById",function(){return S}),n.d(t,"queJobLogById",function(){return C}),n.d(t,"queloglistById",function(){return J}),n.d(t,"queryDbTable",function(){return E}),n.d(t,"queryFullDbTable",function(){return q});var o=function(e){return r.a.setPromise("GET","/mcp/job/jobs",e)},i=function(e){return r.a.setPromise("POST","/mcp/job/query_jobs",e)},a=function(e){return r.a.setPromise("GET","/mcp/job/query_job_names",e)},u=function(e){return r.a.setPromise("GET","/mcp/job/query_tree_list",e)},s=function(e){return r.a.setPromise("GET","/mcp/job/query_tree",e)},c=function(e){return r.a.setPromise("POST","/mcp/job/add_job",e)},l=function(e){return r.a.setPromise("GET","/mcp/job/query_agents",e)},f=function(e){return r.a.setPromise("POST","/mcp/job/check_env_increment",e)},d=function(e){return r.a.setPromise("POST","/mcp/job/check_env_column",e)},m=function(e){return r.a.setPromise("POST","/mcp/job/check_env_metadata?sourceId="+e,e)},p=function(e,t){return r.a.setPromise("POST","/mcp/job/check_env_ddl?routeId="+t,e)},b=function(e){return r.a.setPromise("PUT","/mcp/job/update",e)},v=function(e){return r.a.setPromise("GET","/mcp/job/query_binlog",e)},g=function(e){return r.a.setPromise("PUT","/mcp/job/trigger_save",e)},_=function(e,t){return r.a.setPromise("POST","/mcp/job/trigger/"+e,t)},x=function(e,t){return r.a.setPromise("PUT","/mcp/job/trigger?jobId="+t,e)},h=function(e,t){return r.a.setPromise("POST","/mcp/job/pause/"+e,t)},y=function(e,t){return r.a.setPromise("PUT","/mcp/job/pause?jobId="+t,e)},P=function(e,t){return r.a.setPromise("POST","/mcp/job/resume/"+e,t)},j=function(e,t){return r.a.setPromise("PUT","/mcp/job/resume?jobId="+t,e)},w=function(e,t){return r.a.setPromise("PUT","/mcp/job/kill?LogId="+t,e)},T=function(e,t){return r.a.setPromise("PUT","/mcp/job/remove?jobId="+t,e)},I=function(e,t){return r.a.setPromise("PUT","/mcp/job/configure?jobId="+t,e)},k=function(e){return r.a.setPromise("GET","/mcp/joblog/logs",e)},S=function(e,t){return r.a.setPromise("GET","/mcp/joblog/logs/"+e,t)},C=function(e){return r.a.setPromise("POST","/mcp/joblog/loginfo",e)},J=function(e){return r.a.setPromise("POST","/mcp/joblog/query_log",e)},E=function(e){return r.a.setPromise("GET","/mcp/ddl_rule/query_db_table",e)},q=function(e){return r.a.setPromise("GET","/mcp/ddl_rule/query_full_db_table",e)}},675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(611),o=n(598);n(601);t.default={name:"JobsDefinition",data:function(){return{execu:{},projects:["BDP","IDSS","MCP"],params:{jobList:[this.$route.params.id],entity:{logId:this.$route.params.logId,triggerTime:this.$route.params.time,triggerCode:300}},jobsList:[],execution:"Summary",logInfo:[]}},methods:{fmtHandleTime:function(e){var t={},n=new Date(e.handleTime);return t.Y=n.getFullYear().toString().substring(2),t.M=n.getMonth()+1,t.D=n.getDate(),t.H=n.getHours(),t.m=n.getMinutes(),t.type="AM",t.H>11&&(t.type="PM"),t.H>12&&(t.H=t.H-12),t.M+"/"+t.D+"/"+t.Y+" "+t.H+":"+t.m+" "+t.type+" "},fmtDuration:function(e){return null==e.duration?"":e.duration<1?"<1s":e.duration+"s"},queJobById:function(){var e=this,t={};t.jobList=[this.$route.params.id],t.entity={logId:this.$route.params.logId},r.queloglistById(t).then(function(t){t.code===o.a?(e.execu=t.items[0],e.jobsList=t.items):e.$message({message:t.message,type:"error",center:!0})}).catch(function(){})},fmtlog:function(e){var t=[];if(e){var n=e.split("\n"),r=n.length;n.forEach(function(e){if(e){var n={},o=e.split(" [");1!=r||o[1]?(n.time=o[0]||"",n.cont=o[1]||""):(n.time="",n.cont=o[0]),t.push(n)}})}this.logInfo=t},queJobLogById:function(){var e=this;r.queJobLogById(this.params).then(function(t){t.code===o.a?e.fmtlog(t.items.logInfo):(e.getDBRoutes(),e.$message({message:t.message,type:"error",center:!0}))}).catch(function(){e.getDBRoutes()})},exChange:function(e){"Log Output"==e&&this.queJobLogById()},rowClass:function(e){var t=e.row;e.rowIndex;return t.show?"row-show":"row-hide"},spanAcs:function(e){var t=e.row,n=e.columnIndex;if(0===n||1===n){var r=0;return t.first&&(r=t.unwrap?t.rowspan:1),{rowspan:r,colspan:1}}},init:function(){this.queJobById()},fmtStatus:function(e){switch(e){case 300:return"Running";case 200:return"Success";case 100:return"Init";case 500:return"Failed"}}},created:function(){this.init()}}},727:function(e,t,n){t=e.exports=n(306)(),t.push([e.i,"\n.dash-area[data-v-f1620a1e]{\r\n\theight: 240px;\n}\n.dash-area>li[data-v-f1620a1e]{\r\n\twidth: 50%;\n}\n.dash-area .left[data-v-f1620a1e]{\r\n\tbackground: #efefef;-ms-flex-pack: end;justify-content: flex-end;text-align: right;\n}\n.dash-area li>div[data-v-f1620a1e]{width: 20px;height: 100%;\n}\n.dash-area ul li[data-v-f1620a1e]{\r\n\tpadding: 6px 0;height: 19px;\n}\n.dash-area .right[data-v-f1620a1e]{\r\n\tbackground: #fff;color: #2c6daf;\n}\n.log-output[data-v-f1620a1e]{\n}\n.log-output li p[data-v-f1620a1e]{\r\n\tpadding: 3px 10px 3px;\n}\n.log-output .left[data-v-f1620a1e]{\r\n\twidth: 180px;background: #efefef;text-align: right;min-width: 180px;\n}\r\n/*表格*/\n.action-td i[data-v-f1620a1e]{\r\n\tmargin: 0 5px;\n}\n.margin0[data-v-f1620a1e]{\r\n\tmargin: 0;\n}\r\n/* 通用flex */\n.center[data-v-f1620a1e]{\r\n\tdisplay: -ms-inline-flexbox;\r\n\tdisplay: inline-flex;-ms-flex-pack: center;justify-content: center;-ms-flex-align: center;align-items: center;\n}\n.fxcenter[data-v-f1620a1e]{\r\n\tdisplay: -ms-inline-flexbox;\r\n\tdisplay: inline-flex;display: -webkit-inline-flex;\r\n\t-webkit-justify-content: center;\n}\n.fxmiddle[data-v-f1620a1e]{\r\n\tdisplay: -webkit-inline-flex;\r\n\t-webkit-align-items: center;\n}\n.center[data-v-f1620a1e]{\r\n\tdisplay: -webkit-inline-flex;\r\n\t-webkit-justify-content: center;\r\n\t-webkit-align-items: center;\n}\n.middle[data-v-f1620a1e]{\r\n\tdisplay: -webkit-inline-flex;\r\n\t-webkit-justify-content: center;\r\n\t-webkit-align-items: center;\n}\n.fxnowrap[data-v-f1620a1e]{\r\n\t-ms-flex-wrap: nowrap;\r\n\t    flex-wrap: nowrap;\n}\n.fxwrap[data-v-f1620a1e]{\r\n\t-ms-flex-wrap: wrap;\r\n\t    flex-wrap: wrap;\n}\n.fxcolumn[data-v-f1620a1e]{\r\n\t-ms-flex-direction: column;\r\n\t    flex-direction: column;\n}\n.flex1[data-v-f1620a1e]{\r\n\t-ms-flex-positive: 1;\r\n\t    flex-grow: 1;\n}\n.flex[data-v-f1620a1e]{\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\n}\n.shrink0[data-v-f1620a1e]{\r\n\t-ms-flex-negative: 0;\r\n\t    flex-shrink: 0;\n}\n.fsize18[data-v-f1620a1e]{\r\n\tfont-size: 18px;\n}\r\n",""])},761:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:"/project/ProjectList"}},[e._v("Project List")]),e._v(" "),n("el-breadcrumb-item",[e._v("Jobs Execution")])],1)],1)]),e._v(" "),n("div",{staticClass:"container pd20"},[n("ul",{staticClass:"dash-area flex"},[e._m(0),e._v(" "),n("li",{staticClass:"flex1 right fxmiddle"},[n("div"),e._v(" "),n("ul",[n("li",[e._v(e._s(e.execu.jobId))]),e._v(" "),n("li",[e._v(e._s(e.execu.logId))]),e._v(" "),n("li",[e._v(e._s(e.execu.groupName))]),e._v(" "),n("li",[e._v(e._s(e.execu.jobName))]),e._v(" "),n("li",[e._v(e._s(e.execu.jobType))]),e._v(" "),n("li",[e._v(e._s(e.fmtStatus(e.execu.handleCode)))])])])]),e._v(" "),n("el-radio-group",{staticClass:"mb15 mt15",attrs:{fill:"#2c6daf"},on:{change:e.exChange},model:{value:e.execution,callback:function(t){e.execution=t},expression:"execution"}},[n("el-radio-button",{attrs:{label:"Summary"}}),e._v(" "),n("el-radio-button",{attrs:{label:"Log Output"}})],1),e._v(" "),n("ul",{staticClass:"shadow margin0"},[n("li",{directives:[{name:"show",rawName:"v-show",value:"Summary"==e.execution,expression:"execution=='Summary'"}]},[n("el-table",{attrs:{data:e.jobsList,"empty-text":"No data",width:"60%"}},[n("el-table-column",{attrs:{label:"JobType",prop:"scheduleType"}}),e._v(" "),n("el-table-column",{attrs:{label:"Start Time",formatter:e.fmtHandleTime,prop:"handleTime"}}),e._v(" "),n("el-table-column",{attrs:{label:"Duration",prop:"duration",formatter:e.fmtDuration}}),e._v(" "),n("el-table-column",{attrs:{label:"Binlog Name",prop:"binlogName"}}),e._v(" "),n("el-table-column",{attrs:{label:"Binlog Position",prop:"binlogPosition"}}),e._v(" "),n("el-table-column",{attrs:{label:"Agent Group",prop:"agent"}})],1)],1),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:"Log Output"==e.execution,expression:"execution=='Log Output'"}]},[n("ul",{staticClass:"log-output"},[e._m(1),e._v(" "),e._l(e.logInfo,function(t){return n("li",{staticClass:"flex"},[n("p",{staticClass:"left"},[e._v(e._s(t.time))]),e._v(" "),n("p",{staticClass:"right flex1",domProps:{innerHTML:e._s(t.cont)}})])}),e._v(" "),e._m(2)],2)])])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"flex1 flex left fxmiddle"},[n("ul",[n("li",[e._v("Job Id:")]),e._v(" "),n("li",[e._v("Log Id:")]),e._v(" "),n("li",[e._v("Job Group:")]),e._v(" "),n("li",[e._v("Job Name:")]),e._v(" "),n("li",[e._v("Job Type:")]),e._v(" "),n("li",[e._v("Job Status:")])]),e._v(" "),n("div")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"flex",staticStyle:{height:"15px"}},[n("p",{staticClass:"left"}),n("p",{staticClass:"right flex1"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"flex",staticStyle:{height:"15px"}},[n("p",{staticClass:"left"}),n("p",{staticClass:"right flex1"})])}]},e.exports.render._withStripped=!0},787:function(e,t,n){var r=n(727);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(308)("962c594e",r,!1)}});
webpackJsonp([12],{592:function(e,r,t){t(785);var s=t(307)(t(682),t(759),"data-v-bb319430",null);s.options.__file="D:\\jiuye-pro\\jydata-git\\mcp-new\\mcp-ui\\src\\pages\\user\\AddUser.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] AddUser.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},597:function(e,r,t){"use strict";var s=t(310),a=t.n(s),n=t(599),o=t.n(n),u=t(600),i=t.n(u),l=function(){function e(){o()(this,e)}return i()(e,null,[{key:"setPromise",value:function(e,r,t){return new a.a(function(s,a){switch(e.toUpperCase()){case"GET":axios.get(r,{params:t}).then(function(e){e?s(e.data):a()});break;case"POST":case"PUT":axios({method:e,url:r,data:t}).then(function(e){e?s(e.data):a()});break;case"DELETE":axios.delete(r,{data:t}).then(function(e){e?s(e.data):a()})}})}}]),e}();r.a=l},598:function(e,r,t){"use strict";t.d(r,"a",function(){return s}),t.d(r,"b",function(){return a});var s="SUCCESS",a="ERROR"},599:function(e,r,t){"use strict";r.__esModule=!0,r.default=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}},600:function(e,r,t){"use strict";r.__esModule=!0;var s=t(309),a=function(e){return e&&e.__esModule?e:{default:e}}(s);r.default=function(){function e(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,a.default)(e,s.key,s)}}return function(r,t,s){return t&&e(r.prototype,t),s&&e(r,s),r}}()},601:function(e,r,t){"use strict";t.d(r,"e",function(){return s}),t.d(r,"j",function(){return a}),t.d(r,"b",function(){return n}),t.d(r,"f",function(){return o}),t.d(r,"k",function(){return u}),t.d(r,"l",function(){return i}),t.d(r,"c",function(){return l}),t.d(r,"g",function(){return c}),t.d(r,"i",function(){return d}),t.d(r,"h",function(){return m}),t.d(r,"d",function(){return f}),t.d(r,"a",function(){return p});var s="Operation is successful！",a="Add successfully！",n="Updated successfully！",o="Deleted successfully！",u="Connection test successfully!",i="Connection test successfully!",l="Saved successfully!",c="Saved failed!",d="Synchronized successfully!",m="Transform successfully!",f="Reset password successfully！",p="Modify successfully！"},602:function(e,r,t){"use strict";var s=t(597);t.d(r,"b",function(){return a}),t.d(r,"e",function(){return n}),t.d(r,"f",function(){return o}),t.d(r,"d",function(){return u}),t.d(r,"c",function(){return i}),t.d(r,"g",function(){return l}),t.d(r,"a",function(){return c}),t.d(r,"h",function(){return d}),t.d(r,"i",function(){return m}),t.d(r,"j",function(){return f});var a=function(e){return s.a.setPromise("POST","/mcp/user/query_list",e)},n=function(e){return s.a.setPromise("POST","/mcp/user/save",e)},o=function(e){return s.a.setPromise("POST","/mcp/user/update",e)},u=function(e){return s.a.setPromise("POST","/mcp/user/update_status",e)},i=function(e){return s.a.setPromise("POST","/mcp/user/query",e)},l=function(e){return s.a.setPromise("POST","/mcp/user/reset_password",e)},c=function(e){return s.a.setPromise("POST","/mcp/user/update_password",e)},d=function(e){return s.a.setPromise("GET","/mcp/user/query_manager_list",e)},m=function(e){return s.a.setPromise("POST","/mcp/user/login",e)},f=function(e){return s.a.setPromise("GET","/mcp/user/logout",e)}},682:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t(598),a=t(601),n=t(602);r.default={name:"AddUser",data:function(){var e=this,r=/^[a-zA-Z]+[\w]*$/,t=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,s=/^\S{6,16}$/,a=/^1[35678]\d{9}$/;return{title:{from:{},to:{}},isOwner:"",isAdd:"",isEdit:"",isReset:"",user:"",userData:{userId:0,userName:"",email:"",phone:"",role:"",password:"",confirmPassword:""},rules:{userName:[{required:!0,validator:function(e,t,s){return""===t||t.trim().length<=0?s(new Error("Username is required.")):-1!==t.lastIndexOf(" ")?s(new Error("Username cannot contain spaces.")):void(r.test(t)?s():s(new Error("Only numbers,letters and underline are allowed, and letters must be in front")))},trigger:"blur"}],email:[{required:!0,validator:function(e,r,s){return""===r||r.trim().length<=0?s(new Error("email is required")):t.test(r)?void s():s(new Error("email format is incorrect"))},trigger:"blur"}],phone:[{required:!0,validator:function(e,r,t){return""===r||r.trim().length<=0?t(new Error("Phone is required")):a.test(r)?void t():t(new Error("Phone format is incorrect"))},trigger:"blur"}],role:[{required:!0,message:"Please select role",trigger:"change"}],password:[{required:!0,validator:function(r,t,a){return t?e.userData.password===e.userData.userName?a(new Error("The password cannot be the same as the user name")):s.test(t)?void a():a(new Error("The password should be 6-16 non-null characters")):a(new Error("Password is required"))},trigger:"blur"}],confirmPassword:[{required:!0,validator:function(r,t,a){return t?s.test(t)?t!==e.userData.password?a(new Error("The two passwords you entered don't match")):void a():a(new Error("The password should be 6-16 non-null characters")):a(new Error("ConfirmPassword is required"))},trigger:"blur"}]}}},created:function(){var e=this.$route.query;void 0===e.userName?(this.isEdit=!1,this.isReset=!1,this.isAdd=!0,this.title="User List -> Add User",this.title={from:{name:"User List",url:"/user/UserList"},to:{name:"Add User"}}):(this.title="User List -> Edit User",this.title={from:{name:"User List",url:"/user/UserList"},to:{name:"Edit User"}},this.isEdit=!0,this.isAdd=!1,1==e.operator||0==e.role?this.isReset=!1:this.isReset=!0,this.userData.userId=e.userId,this.userData.userName=e.userName,this.userData.email=e.email,this.userData.phone=e.phone,this.userData.role=e.role),this.isOwner=this.userData.userName===localStorage.getItem("userName")},methods:{getmd5:function(e){return hex_md5(e)},saveUser:function(e){var r=this;this.$refs[e].validate(function(e){e&&n.e({userName:r.userData.userName,email:r.userData.email,phone:r.userData.phone,userRole:r.userData.role,createUser:localStorage.getItem("userName"),password:r.getmd5(r.userData.password)}).then(function(e){e.code===s.a?(r.$message({message:a.c,type:"success"}),r.$router.push("UserList")):r.$message({message:e.message,type:"error",center:!0})}).catch(function(){})})},editUser:function(e){var r=this;this.$refs[e].validate(function(e){e&&n.f({userId:r.userData.userId,userName:r.userData.userName,email:r.userData.email,phone:r.userData.phone,userRole:r.userData.role,createUser:localStorage.getItem("userName")}).then(function(e){e.code===s.a?(r.$message({message:a.c,type:"success"}),r.$router.push("UserList")):r.$message({message:e.message,type:"error",center:!0})}).catch(function(){})})},resetPassword:function(){var e=this;n.g({userId:this.userData.userId,userName:this.userData.userName,updateUser:localStorage.getItem("userName")}).then(function(r){r.code===s.a?(e.$message({message:a.d,type:"success"}),e.$router.push("UserList")):e.$message({message:r.message,type:"error",center:!0})}).catch(function(){})}}}},725:function(e,r,t){r=e.exports=t(306)(),r.push([e.i,"\n.el-form[data-v-bb319430] {\n  padding: 20px;\n  margin-left: 20%;\n}\n.el-form .el-input[data-v-bb319430],\n.el-form .el-select[data-v-bb319430] {\n  width: 50%;\n}\n.table[data-v-bb319430] {\n  position: relative;\n}\n.table .button[data-v-bb319430] {\n  position: absolute;\n  right: 20px;\n  bottom: 15px;\n}\n.subtitle[data-v-bb319430] {\n  background-color: #f7f7f7;\n  height: 35px;\n  line-height: 35px;\n  padding-left: 15px;\n}\n",""])},759:function(e,r,t){e.exports={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",[t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:e.title.from.url}},[e._v(e._s(e.title.from.name))]),e._v(" "),t("el-breadcrumb-item",[e._v(e._s(e.title.to.name))])],1)],1)]),e._v(" "),t("div",{staticClass:"container gray"},[t("div",{staticClass:"table shadow mt0"},[t("div",{staticClass:"subtitle"},[e._v("User Detail")]),e._v(" "),t("el-form",{ref:"userData",attrs:{"label-position":"top",rules:e.rules,model:e.userData}},[t("el-form-item",{attrs:{label:"User Name",prop:"userName"}},[t("el-input",{attrs:{maxlength:"20",readonly:e.isEdit},model:{value:e.userData.userName,callback:function(r){e.$set(e.userData,"userName",r)},expression:"userData.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Email",prop:"email"}},[t("el-input",{attrs:{clearable:""},model:{value:e.userData.email,callback:function(r){e.$set(e.userData,"email",r)},expression:"userData.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Phone",prop:"phone"}},[t("el-input",{attrs:{clearable:""},model:{value:e.userData.phone,callback:function(r){e.$set(e.userData,"phone",r)},expression:"userData.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Role",prop:"role"}},[t("el-select",{attrs:{placeholder:"Please select",disabled:e.isOwner},model:{value:e.userData.role,callback:function(r){e.$set(e.userData,"role",r)},expression:"userData.role"}},[t("el-option",{attrs:{label:"Administrator",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"User",value:"1"}})],1)],1),e._v(" "),e.isAdd?t("el-form-item",{attrs:{label:"Password",prop:"password"}},[t("el-input",{staticClass:"yellow",attrs:{type:"password",clearable:""},model:{value:e.userData.password,callback:function(r){e.$set(e.userData,"password",r)},expression:"userData.password"}})],1):e._e(),e._v(" "),e.isAdd?t("el-form-item",{attrs:{label:"Confirm Password",prop:"confirmPassword"}},[t("el-input",{staticClass:"yellow",attrs:{type:"password",clearable:""},model:{value:e.userData.confirmPassword,callback:function(r){e.$set(e.userData,"confirmPassword",r)},expression:"userData.confirmPassword"}})],1):e._e()],1),e._v(" "),t("div",{staticClass:"button"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isReset,expression:"isReset"}],on:{click:e.resetPassword}},[e._v("Reset Password")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isAdd,expression:"isAdd"}],on:{click:function(r){return e.saveUser("userData")}}},[e._v("Save")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],on:{click:function(r){return e.editUser("userData")}}},[e._v("Save")])],1)],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},785:function(e,r,t){var s=t(725);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(308)("4543623c",s,!1)}});